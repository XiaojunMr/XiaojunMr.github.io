var item = data.arr;var dataImg = item[0].img;var iWidth = document.body.scrollWidth || document.documentElement.scrolllWidth;var iHeight = document.body.scrollHeight || document.documentElement.scrollHeight; canvasCtx(iWidth/2,iHeight/2,dataImg);canvasDa(2*iWidth/3,iHeight/2,dataImg);function canvasDa(cavsWidth,cavsHeight,dataImg){var canvas =document.querySelector("#canvasDa");var cxt =canvas.getContext("2d");var offCanvas = document.querySelector("#offCanvas");var offCtx = offCanvas.getContext("2d");var scaleX;var scaleY;var image =new  Image();var isMouseDown = false;window.onload =function(){canvas.width =cavsWidth;canvas.height= 2*cavsWidth/3;image.src=dataImg;image.onload =function(){offCanvas.width =image.width;offCanvas.height = image.height;scaleX=offCanvas.width/canvas.width;scaleY= offCanvas.height/canvas.height;cxt.drawImage(image,0,0,canvas.width,canvas.height);offCtx.drawImage(image,0,0)}};function windowToCanvas(x,y){var  bbox = canvas.getBoundingClientRect();return{x: x-bbox.left,y:y-bbox.top};console.log(canvas.getBoundingClientRect());};canvas.onmousedown =function(e){e.preventDefault();var point =windowToCanvas(e.clientX,e.clientY);isMouseDown = true;drawCanvasWidthMagnifter(true,point);};canvas.onmousemove = function(e){e.preventDefault();if(isMouseDown == true){var point =windowToCanvas(e.clientX,e.clientY);drawCanvasWidthMagnifter(true,point);}};canvas.onmouseup = function(e){e.preventDefault();isMouseDown =false;drawCanvasWidthMagnifter(false)};canvas.onmouseout = function(e){e.preventDefault();isMouseDown =false;drawCanvasWidthMagnifter(false)};function drawCanvasWidthMagnifter(isShowMagnifier,point){cxt.clearRect(0,0,canvas.width,canvas.height);cxt.drawImage(image,0,0,canvas.width,canvas.height);if(isShowMagnifier ==true){darwMaginfier(point);}};function darwMaginfier(point){var imageLG_cx = point.x * scaleX;var imageLG_cy = point.y * scaleY;var mr = 150;var sx = imageLG_cx-mr/2;var sy = imageLG_cy-mr/2;var dx = point.x-mr/2;var dy = point.y-mr/2;cxt.save();console.log(point.x);cxt.lineWidth=5.0;cxt.strokeStyle ="#069";cxt.beginPath();cxt.arc(point.x,point.y,mr/2,0,Math.PI*2);cxt.stroke();cxt.clip();cxt.drawImage(offCanvas,sx,sy,mr,mr,dx,dy,mr,mr);console.log(2*mr);cxt.restore();}}